<?xml version='1.0' encoding='UTF-8' ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>

	<title>Chat test!</title>
	<script type="text/javascript"
		src="http://localhost:8080/chamados/template/catalyst/js/chat.js"></script>
</h:head>

<style>
.chatbox {
	position: fixed;
	position: expression("absolute");
	width: 225px;
	display: none;
}

.chatboxhead {
	background-color: #f99d39;
	padding: 7px;
	color: #ffffff;
	border-right: 1px solid #f99d39;
	border-left: 1px solid #f99d39;
}

.chatboxblink {
	background-color: #176689;
	border-right: 1px solid #176689;
	border-left: 1px solid #176689;
}

.chatboxcontent {
	font-family: arial, sans-serif;
	font-size: 13px;
	color: #333333;
	height: 200px;
	width: 209px;
	overflow-y: auto;
	overflow-x: auto;
	padding: 7px;
	border-left: 1px solid #cccccc;
	border-right: 1px solid #cccccc;
	border-bottom: 1px solid #eeeeee;
	background-color: #ffffff;
	line-height: 1.3em;
	overflow-y: scroll;
}

.chatboxinput {
	padding: 5px;
	background-color: #ffffff;
	border-left: 1px solid #cccccc;
	border-right: 1px solid #cccccc;
	border-bottom: 1px solid #cccccc;
}

.chatboxtextarea {
	width: 206px;
	height: 44px;
	padding: 3px 0pt 3px 3px;
	border: 1px solid #eeeeee;
	margin: 1px;
	overflow: hidden;
}

.chatboxtextareaselected {
	border: 2px solid #f99d39;
	margin: 0;
}

.chatboxmessage {
	margin-left: 1em;
}

.chatboxinfo {
	margin-left: -1em;
	color: #666666;
}

.chatboxmessagefrom {
	margin-left: -1em;
	font-weight: bold;
}

.chatboxmessagecontent {
	
}

.chatboxoptions {
	float: right;
}

.chatboxoptions a {
	text-decoration: none;
	color: white;
	font-weight: bold;
	font-family: Verdana, Arial, "Bitstream Vera Sans", sans-serif;
}

.chatboxtitle {
	float: left;
}

/*
 * CSS Document
 * Written by Ryan Yonzon
 * http://ryan.rawswift.com/
 */
html,body {
	margin: 0px;
	/* FF hack: or we'll have double scrollbar showing on the browser */
	overflow: hidden; /* hide browser's main scrollbar */
}

#main_container {
	width: 100%;
	background-color: #ffffff;
	/* DO NOT REMOVE THIS; or you'll have issue w/ the scrollbar, when the mouse pointer is on a white space */
	overflow-x: hidden;
	overflow-y: scroll;
	height: 100%;
	/* this will make sure that the height will extend at the bottom */
	position: absolute;
	/* container div must be absolute, for our fixed bar to work */
}
</style>


<script>
	$(document).ready(function() {

		
		$("#chatboxcontent").scrollTop(9999);

		
		
	});
</script>



<h:body>
	<h:form>
	
	
	
	
		<h:panelGroup>


			<p:poll interval="1" update="msgs" />









		</h:panelGroup>




		<div id="main_container" align="center">
			<div style="bottom: 0px; right: 20px; display: block;"
				class="chatbox" id="chatbox_13">
				<div style="cursor: pointer"
					onclick="javascript:toggleChatBoxGrowth('13')">
					<div class="chatboxhead">
						<div class="chatboxtitle">itswadesh</div>
						<div class="chatboxoptions">
							- <a href="javascript:void(0)"
								onclick="javascript:closeChatBox('13')"> X </a>
						</div>
						<br clear="all" />
					</div>
				</div>



				<div id="chatboxcontent" class="chatboxcontent">


					<ui:repeat id="msgs" value="#{chatController.mensagens2}"
						var="mensagem" >

						<div class="chatboxmessage">
							<span class="chatboxmessagefrom">#{mensagem.usuario.login}:&nbsp;&nbsp;</span>
							<span class="chatboxmessagecontent"><h:outputText
									value="#{mensagem.mensagem}" /></span>
						</div>
						<div class="chatboxmessage">
							<span class="chatboxinfo">#{mensagem.dataMensagem}</span>
						</div>

					</ui:repeat>
				</div>

				<div class="chatboxinput">
					<textarea class="chatboxtextarea"
						onkeydown="javascript:return checkChatBoxInputKey(event,this,'13','itswadesh');"></textarea>

					<p:inputText id="txt" value="#{chatController.mensagem}"
						update="msgs,txt"
						onkeypress="if (event.keyCode == 13) { onchange(); return false; }">
						<p:ajax event="change" listener="#{chatController.addMensagem}" />
					</p:inputText>

					<h:commandButton id="fakebutton"
						actionListener="#{chatController.addMensagem}" />



				</div>
			</div>

		</div>

	</h:form>





</h:body>

</html>

